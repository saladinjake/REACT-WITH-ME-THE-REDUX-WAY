{"ast":null,"code":"//get action stypes\nimport { GET_COURSES, COURSE_ERROR, ADD_TO_CART, REMOVE_FROM_CART, ADD_QUANTITY, SUB_QUANTITY, CLEAR_CART } from \"../actions/types\";\nimport toast from \"react-hot-toast\"; //prefetch initial state\n\nconst cachedCart = localStorage && (JSON === null || JSON === void 0 ? void 0 : JSON.parse(localStorage.getItem(\"cart\")));\nconst cachedTotal = localStorage && localStorage.getItem(\"total\"); //set state initial\n\nconst initialState = {\n  cart: cachedCart ? cachedCart : [],\n  courses: [],\n  total: cachedTotal ? cachedTotal : 0\n};\n/*\r\n*@companyName: EMS\r\n*@Location : Lagos Nigeria\r\n*@Author/Developer : juwa victor/saladinjake\r\n*@AuthorsEmail : juwavictor@gmail.com\r\n*@description: reducer for authentication\r\n*@params: Object  state; Object action\r\n*@usage: dispatch(reducer)\r\n*/\n\nexport default (function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ADD_TO_CART:\n      let itemToBeAdded = state.courses.find(item => item.id === action.payload);\n      let existingItem = state.cart.find(item => action.payload === item.id);\n\n      if (existingItem) {\n        toast.success(`Course already in cart`);\n        return { ...state\n        };\n      } else {\n        itemToBeAdded.quantity = 1;\n        let newTotal = parseInt(state.total) + parseInt(itemToBeAdded.course_fee);\n        toast.success(`Course added to cart`);\n        localStorage.setItem(\"cart\", JSON.stringify([...state.cart, itemToBeAdded]));\n        localStorage.setItem(\"total\", newTotal);\n        return { ...state,\n          cart: [...state.cart, itemToBeAdded],\n          total: newTotal\n        };\n      }\n\n    case REMOVE_FROM_CART:\n      let itemToRemove = state.cart.find(item => action.payload === item.id);\n      let newCart = state.cart.filter(item => action.payload !== item.id);\n      let newTotal = state.total - itemToRemove.course_fee * itemToRemove.quantity;\n      toast.error(`Course removed from cart`);\n      localStorage.setItem(\"cart\", JSON.stringify([...newCart]));\n      localStorage.setItem(\"total\", newTotal);\n      return { ...state,\n        cart: [...newCart],\n        total: newTotal\n      };\n\n    case ADD_QUANTITY:\n      let addedItem = state.cart.find(item => item.id === action.payload);\n      addedItem.quantity += 1;\n      newTotal = state.total + addedItem.course_fee;\n      return { ...state,\n        total: newTotal\n      };\n\n    case SUB_QUANTITY:\n      addedItem = state.cart.find(item => item.id === action.payload);\n\n      if (addedItem.quantity === 1) {\n        let new_items = state.cart.filter(item => item.id !== action.payload);\n        let newTotal = state.total - addedItem.course_fee;\n        return { ...state,\n          cart: new_items,\n          total: newTotal\n        };\n      } else {\n        addedItem.quantity -= 1;\n        let newTotal = state.total - addedItem.price;\n        return { ...state,\n          total: newTotal\n        };\n      }\n\n    case CLEAR_CART:\n      toast.error(`Cart Cleared`);\n      localStorage.setItem(\"cart\", JSON.stringify([]));\n      localStorage.setItem(\"total\", 0);\n      return { ...state,\n        cart: []\n      };\n\n    case GET_COURSES:\n      return { ...state,\n        courses: action.payload\n      };\n\n    case COURSE_ERROR:\n      return { ...state\n      };\n\n    default:\n      return state;\n  }\n});","map":{"version":3,"names":["GET_COURSES","COURSE_ERROR","ADD_TO_CART","REMOVE_FROM_CART","ADD_QUANTITY","SUB_QUANTITY","CLEAR_CART","toast","cachedCart","localStorage","JSON","parse","getItem","cachedTotal","initialState","cart","courses","total","state","action","type","itemToBeAdded","find","item","id","payload","existingItem","success","quantity","newTotal","parseInt","course_fee","setItem","stringify","itemToRemove","newCart","filter","error","addedItem","new_items","price"],"sources":["C:/Users/Obiajulu/Desktop/GAB/REACT-WITH-ME/enrollments/src/enterprise-app/core/redux/reducers/cartReducer.js"],"sourcesContent":["//get action stypes\r\nimport {\r\n  GET_COURSES,\r\n  COURSE_ERROR,\r\n  ADD_TO_CART,\r\n  REMOVE_FROM_CART,\r\n  ADD_QUANTITY,\r\n  SUB_QUANTITY,\r\n  CLEAR_CART\r\n} from \"../actions/types\";\r\n\r\nimport toast from \"react-hot-toast\";\r\n//prefetch initial state\r\nconst cachedCart = localStorage && JSON?.parse(localStorage.getItem(\"cart\"));\r\nconst cachedTotal = localStorage && localStorage.getItem(\"total\");\r\n\r\n//set state initial\r\nconst initialState = {\r\n  cart: cachedCart ? cachedCart : [],\r\n  courses: [],\r\n  total: cachedTotal ? cachedTotal :0,\r\n};\r\n\r\n\r\n/*\r\n*@companyName: EMS\r\n*@Location : Lagos Nigeria\r\n*@Author/Developer : juwa victor/saladinjake\r\n*@AuthorsEmail : juwavictor@gmail.com\r\n*@description: reducer for authentication\r\n*@params: Object  state; Object action\r\n*@usage: dispatch(reducer)\r\n*/\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case ADD_TO_CART:\r\n      let itemToBeAdded = state.courses.find(\r\n        (item) => item.id === action.payload\r\n      );\r\n      let existingItem = state.cart.find((item) => action.payload === item.id);\r\n      if (existingItem) {\r\n        toast.success(`Course already in cart`);\r\n        return {\r\n          ...state\r\n        };\r\n      } else {\r\n        itemToBeAdded.quantity = 1;\r\n        let newTotal = parseInt(state.total) + parseInt(itemToBeAdded.course_fee);\r\n        toast.success(`Course added to cart`);\r\n\r\n        localStorage.setItem(\r\n          \"cart\",\r\n          JSON.stringify([...state.cart, itemToBeAdded])\r\n        );\r\n        localStorage.setItem(\"total\", newTotal);\r\n        \r\n        return {\r\n          ...state,\r\n          cart: [...state.cart, itemToBeAdded],\r\n          total: newTotal,\r\n        };\r\n      }\r\n    case REMOVE_FROM_CART:\r\n      let itemToRemove = state.cart.find((item) => action.payload === item.id);\r\n      let newCart = state.cart.filter((item) => action.payload !== item.id);\r\n      let newTotal = state.total - itemToRemove.course_fee * itemToRemove.quantity;\r\n      toast.error(`Course removed from cart`);\r\n\r\n      localStorage.setItem(\"cart\", JSON.stringify([...newCart]));\r\n      localStorage.setItem(\"total\", newTotal);\r\n\r\n      return {\r\n        ...state,\r\n        cart: [...newCart],\r\n        total: newTotal,\r\n      };\r\n    case ADD_QUANTITY:\r\n      let addedItem = state.cart.find((item) => item.id === action.payload);\r\n      addedItem.quantity += 1;\r\n      newTotal = state.total + addedItem.course_fee;\r\n      return {\r\n        ...state,\r\n        total: newTotal,\r\n      };\r\n    case SUB_QUANTITY:\r\n      addedItem = state.cart.find(item => item.id === action.payload) \r\n      \r\n        if(addedItem.quantity === 1){\r\n            let new_items = state.cart.filter(item=>item.id !== action.payload)\r\n            let newTotal = state.total - addedItem.course_fee\r\n            return{\r\n                ...state,\r\n                cart: new_items,\r\n                total: newTotal\r\n            }\r\n        }\r\n        else {\r\n            addedItem.quantity -= 1\r\n            let newTotal = state.total - addedItem.price\r\n            return{\r\n                ...state,\r\n                total: newTotal\r\n            }\r\n      }\r\n    case CLEAR_CART:\r\n      toast.error(`Cart Cleared`);\r\n      localStorage.setItem(\"cart\", JSON.stringify([]));\r\n      localStorage.setItem(\"total\",0);\r\n      return {\r\n        ...state,\r\n        cart:[]\r\n      }\r\n    case GET_COURSES:\r\n      return {\r\n        ...state,\r\n        courses: action.payload,\r\n      };\r\n    case COURSE_ERROR:\r\n      return {\r\n        ...state,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}