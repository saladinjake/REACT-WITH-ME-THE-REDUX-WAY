{"ast":null,"code":"// import action types\nimport { AUTH_ERROR, LOGIN_SUCCESS, LOGIN_FAIL, LOGOUT, RESET_ERROR, SET_PATH, SET_LOADING } from \"./../actions/types\"; //prefetch initial existing states\n\nconst cachedUser = localStorage && (JSON === null || JSON === void 0 ? void 0 : JSON.parse(localStorage.getItem(\"user\")));\nconst cachedRole = localStorage && (JSON === null || JSON === void 0 ? void 0 : JSON.parse(localStorage.getItem(\"user_roles\")));\nconst cachedToken = localStorage && localStorage.getItem(\"token\");\nconst cachedAuthorization = localStorage.user && localStorage.token; //set initial state\n\nconst initialState = {\n  isAuthenticated: cachedAuthorization ? true : false,\n  user: cachedUser ? cachedUser : null,\n  token: cachedToken ? cachedToken : null,\n  user_roles: cachedRole ? cachedRole : null,\n  error: null,\n  loading: false,\n  errFlag: false,\n  prevPath: \"\"\n};\n/*\r\n*@companyName: EMS\r\n*@Location : Lagos Nigeria\r\n*@Author/Developer : juwa victor/saladinjake\r\n*@AuthorsEmail : juwavictor@gmail.com\r\n*@description: reducer for authentication\r\n*@params: Object  state; Object action\r\n*@usage: dispatch(reducer)\r\n*/\n\nexport default (function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case LOGIN_SUCCESS:\n      localStorage.setItem(\"access_token\", action.payload.access_token);\n      localStorage.setItem(\"token\", action.payload.access_token);\n      localStorage.setItem(\"user\", JSON.stringify(action.payload.user));\n      localStorage.setItem(\"user_roles\", JSON.stringify(action.payload.user_roles));\n      return { ...state,\n        loading: false,\n        user: action.payload.user,\n        token: action.payload.access_token,\n        user_roles: action.payload.user_roles,\n        isAuthenticated: true,\n        errFlag: false\n      };\n\n    case AUTH_ERROR:\n    case LOGIN_FAIL:\n    case LOGOUT:\n      localStorage.removeItem(\"access_token\");\n      localStorage.removeItem(\"token\");\n      localStorage.removeItem(\"user\");\n      localStorage.removeItem(\"user_roles\");\n      return { ...state,\n        token: null,\n        loading: false,\n        user_roles: null,\n        isAuthenticated: false,\n        isRegistered: false,\n        user: null,\n        errFlag: true,\n        error: action.payload\n      };\n\n    case SET_PATH:\n      return { ...state,\n        prevPath: action.payload\n      };\n\n    case RESET_ERROR:\n      return { ...state,\n        loading: false,\n        errFlag: false\n      };\n\n    case SET_LOADING:\n      return { ...state,\n        loading: true\n      };\n\n    default:\n      return state;\n  }\n});","map":{"version":3,"names":["AUTH_ERROR","LOGIN_SUCCESS","LOGIN_FAIL","LOGOUT","RESET_ERROR","SET_PATH","SET_LOADING","cachedUser","localStorage","JSON","parse","getItem","cachedRole","cachedToken","cachedAuthorization","user","token","initialState","isAuthenticated","user_roles","error","loading","errFlag","prevPath","state","action","type","setItem","payload","access_token","stringify","removeItem","isRegistered"],"sources":["C:/Users/Obiajulu/Desktop/GAB/REACT-WITH-ME/enrollments/src/enterprise-app/core/redux/reducers/authReducer.js"],"sourcesContent":["// import action types\r\nimport {\r\n  AUTH_ERROR,\r\n  LOGIN_SUCCESS,\r\n  LOGIN_FAIL,\r\n  LOGOUT,\r\n  RESET_ERROR,\r\n  SET_PATH,\r\n  SET_LOADING,\r\n} from \"./../actions/types\";\r\n\r\n//prefetch initial existing states\r\nconst cachedUser = localStorage && JSON?.parse(localStorage.getItem(\"user\"));\r\nconst cachedRole = localStorage && JSON?.parse(localStorage.getItem(\"user_roles\"));\r\nconst cachedToken = localStorage && localStorage.getItem(\"token\");\r\nconst cachedAuthorization = localStorage.user && localStorage.token;\r\n\r\n//set initial state\r\nconst initialState = {\r\n  isAuthenticated: cachedAuthorization ? true : false,\r\n  user: cachedUser ? cachedUser : null,\r\n  token: cachedToken ? cachedToken : null,\r\n  user_roles: cachedRole ? cachedRole : null,\r\n  error: null,\r\n  loading: false,\r\n  errFlag: false,\r\n  prevPath: \"\",\r\n};\r\n\r\n\r\n\r\n\r\n/*\r\n*@companyName: EMS\r\n*@Location : Lagos Nigeria\r\n*@Author/Developer : juwa victor/saladinjake\r\n*@AuthorsEmail : juwavictor@gmail.com\r\n*@description: reducer for authentication\r\n*@params: Object  state; Object action\r\n*@usage: dispatch(reducer)\r\n*/\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case LOGIN_SUCCESS:\r\n      localStorage.setItem(\"access_token\", action.payload.access_token);\r\n      localStorage.setItem(\"token\", action.payload.access_token);\r\n      localStorage.setItem(\"user\", JSON.stringify(action.payload.user));\r\n      localStorage.setItem(\"user_roles\", JSON.stringify(action.payload.user_roles));\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        user: action.payload.user,\r\n        token: action.payload.access_token,\r\n        user_roles:action.payload.user_roles,\r\n        isAuthenticated: true,\r\n        errFlag: false,\r\n      };\r\n    case AUTH_ERROR:\r\n    case LOGIN_FAIL:\r\n    case LOGOUT:\r\n      localStorage.removeItem(\"access_token\");\r\n      localStorage.removeItem(\"token\");\r\n      localStorage.removeItem(\"user\");\r\n      localStorage.removeItem(\"user_roles\");\r\n      return {\r\n        ...state,\r\n        token: null,\r\n        loading: false,\r\n        user_roles:null,\r\n        isAuthenticated: false,\r\n        isRegistered: false,\r\n        user: null,\r\n        errFlag: true,\r\n        error: action.payload,\r\n      };\r\n    case SET_PATH:\r\n      return {\r\n        ...state,\r\n        prevPath: action.payload,\r\n      };\r\n    case RESET_ERROR:\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        errFlag: false,\r\n      };\r\n    case SET_LOADING:\r\n      return {\r\n        ...state,\r\n        loading: true,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}