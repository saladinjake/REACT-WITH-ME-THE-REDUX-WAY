{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Obiajulu\\\\Desktop\\\\GAB\\\\REACT-WITH-ME\\\\enrollments\\\\src\\\\enterprise-app\\\\core\\\\views\\\\pages\\\\students\\\\checkout\\\\Checkout.js\";\nimport React, { Fragment, useState } from \"react\";\nimport { Container, Row, Col, Button } from \"react-bootstrap\";\nimport HeaderTwo from \"../../../components/Header\";\nimport { BreadcrumbBox } from \"../../../components/common/Breadcrumb\";\nimport FooterTwo from \"../../../components/Footer\";\nimport { Styles } from \"./styles/checkout.js\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { enrollCourses } from \"services/enrollment.js\";\nimport toast from \"react-hot-toast\";\nimport { useHistory } from \"react-router-dom\";\n/*\r\n*@companyName: EMS\r\n*@Location : Lagos Nigeria\r\n*@Author/Developer : juwa victor/saladinjake\r\n*@AuthorsEmail : juwavictor@gmail.com\r\n*@description: page checkout\r\n\r\n*/\n\nconst Checkout = _ref => {\n  let {\n    cart: {\n      cart,\n      total\n    },\n    auth: {\n      user\n    }\n  } = _ref;\n  let history = useHistory();\n  const [loading, setLoading] = useState(false);\n\n  const enrollStudent = async () => {\n    setLoading(true);\n\n    if (cart.length > 0) {\n      let payload = [];\n      cart.forEach(item => {\n        let newObj = {};\n        newObj.user_id = user.id;\n        newObj.course_id = item.id;\n        payload.push(newObj);\n      });\n\n      try {\n        await enrollCourses({\n          enrollments: payload\n        });\n        toast.success(`Courses enrolled succesfully`);\n        history.push(\"products\");\n      } catch (err) {\n        var _err$response, _err$response$data;\n\n        toast.error((err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || `Error occured enrolling you for this Course`);\n      }\n    }\n\n    setLoading(false);\n  };\n\n  return /*#__PURE__*/React.createElement(Styles, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"main-wrapper about-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(HeaderTwo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(BreadcrumbBox, {\n    title: \"Checkout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: \"12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    className: \"checkout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"tab-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }\n  }, \"Customer Name: \", `${user === null || user === void 0 ? void 0 : user.first_name} ${user === null || user === void 0 ? void 0 : user.last_name}`), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"tab-desc\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }, \"Customer Email: \", user === null || user === void 0 ? void 0 : user.email), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"list-unstyled check-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 17\n    }\n  }, cart.length > 0 ? /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 21\n    }\n  }, cart.map((data, i) => {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-check\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 29\n      }\n    }), data.course_name);\n  })) : /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 21\n    }\n  }, \"No items in cart\")), cart.length > 0 && /*#__PURE__*/React.createElement(Button, {\n    onClick: enrollStudent,\n    className: \"mt-4\",\n    variant: \"success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 19\n    }\n  }, loading ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"spinner-border\",\n    role: \"status\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sr-only\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 25\n    }\n  }, \"Loading...\")) : `Pay #${total} with Paystack`))))), /*#__PURE__*/React.createElement(FooterTwo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }\n  })));\n};\n\nCheckout.propTypes = {\n  cart: PropTypes.object.isRequired,\n  auth: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  cart: state.cart,\n  auth: state.auth\n});\n\nexport default connect(mapStateToProps, {})(Checkout);","map":{"version":3,"names":["React","Fragment","useState","Container","Row","Col","Button","HeaderTwo","BreadcrumbBox","FooterTwo","Styles","PropTypes","connect","enrollCourses","toast","useHistory","Checkout","cart","total","auth","user","history","loading","setLoading","enrollStudent","length","payload","forEach","item","newObj","user_id","id","course_id","push","enrollments","success","err","error","response","data","message","first_name","last_name","email","map","i","course_name","propTypes","object","isRequired","mapStateToProps","state"],"sources":["C:/Users/Obiajulu/Desktop/GAB/REACT-WITH-ME/enrollments/src/enterprise-app/core/views/pages/students/checkout/Checkout.js"],"sourcesContent":["import React, { Fragment,useState} from \"react\";\r\nimport { Container, Row, Col, Button } from \"react-bootstrap\";\r\nimport HeaderTwo from \"../../../components/Header\";\r\nimport { BreadcrumbBox } from \"../../../components/common/Breadcrumb\";\r\nimport FooterTwo from \"../../../components/Footer\";\r\nimport { Styles } from \"./styles/checkout.js\";\r\n\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport { enrollCourses } from \"services/enrollment.js\";\r\nimport toast from \"react-hot-toast\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\n\r\n/*\r\n*@companyName: EMS\r\n*@Location : Lagos Nigeria\r\n*@Author/Developer : juwa victor/saladinjake\r\n*@AuthorsEmail : juwavictor@gmail.com\r\n*@description: page checkout\r\n\r\n*/\r\n\r\nconst Checkout = ({ cart: { cart, total }, auth: { user } }) => {\r\n  let history = useHistory();\r\n  const [loading, setLoading] = useState(false);\r\n\r\n\r\n  const enrollStudent = async () => {\r\n    setLoading(true);\r\n    if (cart.length > 0) {\r\n      let payload = [];\r\n      cart.forEach((item) => {\r\n        let newObj = {};\r\n        newObj.user_id = user.id;\r\n        newObj.course_id = item.id;\r\n        payload.push(newObj);\r\n      });\r\n\r\n      try {\r\n        await enrollCourses({\r\n          enrollments: payload,\r\n        });\r\n        toast.success(`Courses enrolled succesfully`);\r\n        history.push(\"products\");\r\n      } catch (err) {\r\n        toast.error(\r\n          err?.response?.data?.message ||\r\n            `Error occured enrolling you for this Course`\r\n        );\r\n      }\r\n    }\r\n    setLoading(false);\r\n  };\r\n  return (\r\n    <Styles>\r\n      {/* Main Wrapper */}\r\n      <div className=\"main-wrapper about-page\">\r\n        {/* Header 2 */}\r\n        <HeaderTwo />\r\n\r\n        {/* Breadcroumb */}\r\n        <BreadcrumbBox title=\"Checkout\" />\r\n\r\n        <Container>\r\n          <Row>\r\n            <Col md=\"12\">\r\n              <section className=\"checkout\">\r\n                <h4 className=\"tab-title\">\r\n                  Customer Name: {`${user?.first_name} ${user?.last_name}`}\r\n                </h4>\r\n                <p className=\"tab-desc\">Customer Email: {user?.email}</p>\r\n                <ul className=\"list-unstyled check-list\">\r\n                  {cart.length > 0 ? (\r\n                    <Fragment>\r\n                      {cart.map((data, i) => {\r\n                        return (\r\n                          <li>\r\n                            <i className=\"fa fa-check\"></i>\r\n                            {data.course_name}\r\n                          </li>\r\n                        );\r\n                      })}\r\n                    </Fragment>\r\n                  ) : (\r\n                    <li>No items in cart</li>\r\n                  )}\r\n                </ul>\r\n                {cart.length > 0 && (\r\n                  <Button\r\n                    onClick={enrollStudent}\r\n                    className=\"mt-4\"\r\n                    variant=\"success\"\r\n                  >\r\n                    \r\n                    {loading ? (\r\n                      <div className=\"spinner-border\" role=\"status\">\r\n                        <span className=\"sr-only\">Loading...</span>\r\n                      </div>\r\n                    ) : (\r\n                         `Pay #${total} with Paystack`\r\n                    )}\r\n                  </Button>\r\n                )}\r\n              </section>\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n\r\n        {/* Footer 2 */}\r\n        <FooterTwo />\r\n      </div>\r\n    </Styles>\r\n  );\r\n};\r\n\r\nCheckout.propTypes = {\r\n  cart: PropTypes.object.isRequired,\r\n  auth: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  cart: state.cart,\r\n  auth: state.auth,\r\n});\r\n\r\nexport default connect(mapStateToProps, {})(Checkout);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}